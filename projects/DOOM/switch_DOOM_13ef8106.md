---
tags: pattern, pattern/switch, factorio, code-logic, project/DOOM, pattern/variant/fallthrough
date: 2025-04-25
pattern_type: switch
pattern_variant: fallthrough
source_file: p_saveg.c
line: 491
project: DOOM
first_seen: 2025-04-25
occurrences: 1
ai_analyzed: non
optimizable: non
---

# ğŸ”€ Aiguillage multiple (SWITCH) (Fallthrough)

## Contexte
- **Fichier**: `p_saveg.c`
- **Ligne**: 491
- **Fonction**: P_UnArchiveSpecials
- **Projet**: DOOM
- **Variante**: Fallthrough
- **ComplexitÃ©**: avancÃ©e

## MÃ©taphore Factorio
ğŸ”€ **Aiguillage multiple**

Comme un aiguillage ferroviaire qui dirige vers diffÃ©rentes voies selon la valeur Ã©valuÃ©e.

## Code Source
```c
switch (tclass)
	{
	  case tc_endspecials:
	    return;	// end of list
			
	  case tc_ceiling:
	    PADSAVEP();
	    ceiling = Z_Malloc (sizeof(*ceiling), PU_LEVEL, NULL);
	    memcpy (ceiling, save_p, sizeof(*ceiling));
	    save_p += sizeof(*ceiling);
	    ceiling->sector = &sectors[(int)ceiling->sector];
	    ceiling->sector->specialdata = ceiling;

	    if (ceiling->thinker.function.acp1)
		ceiling->thinker.function.acp1 = (actionf_p1)T_MoveCeiling;

	    P_AddThinker (&ceiling->thinker);
	    P_AddActiveCeiling(ceiling);
	    break;
				
	  case tc_door:
	    PADSAVEP();
	    door = Z_Malloc (sizeof(*door), PU_LEVEL, NULL);
	    memcpy (door, save_p, sizeof(*door));
	    save_p += sizeof(*door);
	    door->sector = &sectors[(int)door->sector];
	    door->sector->specialdata = door;
	    door->thinker.function.acp1 = (actionf_p1)T_VerticalDoor;
	    P_AddThinker (&door->thinker);
	    break;
				
	  case tc_floor:
	    PADSAVEP();
	    floor = Z_Malloc (sizeof(*floor), PU_LEVEL, NULL);
	    memcpy (floor, save_p, sizeof(*floor));
	    save_p += sizeof(*floor);
	    floor->sector = &sectors[(int)floor->sector];
	    floor->sector->specialdata = floor;
	    floor->thinker.function.acp1 = (actionf_p1)T_MoveFloor;
	    P_AddThinker (&floor->thinker);
	    break;
				
	  case tc_plat:
	    PADSAVEP();
	    plat = Z_Malloc (sizeof(*plat), PU_LEVEL, NULL);
	    memcpy (plat, save_p, sizeof(*plat));
	    save_p += sizeof(*plat);
	    plat->sector = &sectors[(int)plat->sector];
	    plat->sector->specialdata = plat;

	    if (plat->thinker.function.acp1)
		plat->thinker.function.acp1 = (actionf_p1)T_PlatRaise;

	    P_AddThinker (&plat->thinker);
	    P_AddActivePlat(plat);
	    break;
				
	  case tc_flash:
	    PADSAVEP();
	    flash = Z_Malloc (sizeof(*flash), PU_LEVEL, NULL);
	    memcpy (flash, save_p, sizeof(*flash));
	    save_p += sizeof(*flash);
	    flash->sector = &sectors[(int)flash->sector];
	    flash->thinker.function.acp1 = (actionf_p1)T_LightFlash;
	    P_AddThinker (&flash->thinker);
	    break;
				
	  case tc_strobe:
	    PADSAVEP();
	    strobe = Z_Malloc (sizeof(*strobe), PU_LEVEL, NULL);
	    memcpy (strobe, save_p, sizeof(*strobe));
	    save_p += sizeof(*strobe);
	    strobe->sector = &sectors[(int)strobe->sector];
	    strobe->thinker.function.acp1 = (actionf_p1)T_StrobeFlash;
	    P_AddThinker (&strobe->thinker);
	    break;
				
	  case tc_glow:
	    PADSAVEP();
	    glow = Z_Malloc (sizeof(*glow), PU_LEVEL, NULL);
	    memcpy (glow, save_p, sizeof(*glow));
	    save_p += sizeof(*glow);
	    glow->sector = &sectors[(int)glow->sector];
	    glow->thinker.function.acp1 = (actionf_p1)T_Glow;
	    P_AddThinker (&glow->thinker);
	    break;
				
	  default:
	    I_Error ("P_UnarchiveSpecials:Unknown tclass %i "
		     "in savegame",tclass);
	}
```

## Note Factorio-style
*Ce pattern fonctionne comme aiguillage multiple dans Factorio. Il comme un aiguillage ferroviaire qui dirige vers diffÃ©rentes voies selon la valeur Ã©valuÃ©e.*

## Patterns Similaires
- [[switch_DOOM_bb766c4e|p_saveg.c:292]] (while)
- [[switch_DOOM_bddb90de|m_menu.c:1864]] (M_Init)
- [[switch_DOOM_3eb065c7|m_menu.c:1520]] (global)
- [[switch_DOOM_bd72bb46|m_menu.c:779]] (M_DrawReadThis2)
- [[switch_DOOM_06435d32|p_spec.c:1020]] (P_PlayerInSpecialSector)

## Note Perso
*Ajouter vos notes personnelles ici...*

## Statistiques du Pattern
- **PremiÃ¨re dÃ©tection**: 2025-04-25
- **DerniÃ¨re mise Ã  jour**: 2025-04-25
- **Nombre d'occurrences**: 1 fichiers
- **AnalysÃ© par IA**: Non
- **Optimisable**: Non

## Patterns liÃ©s
[[if_DOOM_243776b2|ğŸ” Capteur logique (IF)]]
[[if_DOOM_e95e8e34|ğŸ” Capteur logique (IF)]]
[[if_DOOM_e74900f0|ğŸ” Capteur logique (IF)]]
[[else_if_DOOM_9dbf5077|ğŸ”„ RÃ©partiteur intelligent (ELSE IF)]]
[[else_if_DOOM_88acfb35|ğŸ”„ RÃ©partiteur intelligent (ELSE IF)]]
[[else_if_DOOM_59fd791e|ğŸ”„ RÃ©partiteur intelligent (ELSE IF)]]
