---
tags: pattern, pattern/while, factorio, code-logic, project/DOOM, pattern/variant/simple
date: 2025-04-25
pattern_type: while
pattern_variant: simple
source_file: i_sound.c
line: 576
project: DOOM
first_seen: 2025-04-25
occurrences: 1
ai_analyzed: non
optimizable: non
---

# ‚≠ï Tapis roulant surveill√© (WHILE) (Tapis standard)

## Contexte
- **Fichier**: `i_sound.c`
- **Ligne**: 576
- **Fonction**: Aucune (niveau global)
- **Projet**: DOOM
- **Variante**: Tapis standard
- **Complexit√©**: standard

## M√©taphore Factorio
‚≠ï **Tapis roulant surveill√©**

Comme un tapis roulant qui continue √† fonctionner tant qu'une condition est vraie.

## Code Source
```c
while (leftout != leftend)
    {
	// Reset left/right value. 
	dl = 0;
	dr = 0;

	// Love thy L2 chache - made this a loop.
	// Now more channels could be set at compile time
	//  as well. Thus loop those  channels.
	for ( chan = 0; chan < NUM_CHANNELS; chan++ )
	{
	    // Check channel, if active.
	    if (channels[ chan ])
	    {
		// Get the raw data from the channel. 
		sample = *channels[ chan ];
		// Add left and right part
		//  for this channel (sound)
		//  to the current data.
		// Adjust volume accordingly.
		dl += channelleftvol_lookup[ chan ][sample];
		dr += channelrightvol_lookup[ chan ][sample];
		// Increment index ???
		channelstepremainder[ chan ] += channelstep[ chan ];
		// MSB is next sample???
		channels[ chan ] += channelstepremainder[ chan ] >> 16;
		// Limit to LSB???
		channelstepremainder[ chan ] &= 65536-1;

		// Check whether we are done.
		if (channels[ chan ] >= channelsend[ chan ])
		    channels[ chan ] = 0;
	    }
	}
	
	// Clamp to range. Left hardware channel.
	// Has been char instead of short.
	// if (dl > 127) *leftout = 127;
	// else if (dl < -128) *leftout = -128;
	// else *leftout = dl;

	if (dl > 0x7fff)
	    *leftout = 0x7fff;
	else if (dl < -0x8000)
	    *leftout = -0x8000;
	else
	    *leftout = dl;

	// Same for right hardware channel.
	if (dr > 0x7fff)
	    *rightout = 0x7fff;
	else if (dr < -0x8000)
	    *rightout = -0x8000;
	else
	    *rightout = dr;

	// Increment current pointers in mixbuffer.
	leftout += step;
	rightout += step;
    }
```

## Note Factorio-style
*Ce pattern fonctionne comme tapis roulant surveill√© dans Factorio. Il comme un tapis roulant qui continue √† fonctionner tant qu'une condition est vraie.*

## Patterns Similaires
- [[while_DOOM_ff7c76ca|r_bsp.c:178]] (global)
- [[while_DOOM_92be43bf|r_bsp.c:148]] (global)
- [[while_DOOM_669fd485|am_map.c:915]] (AM_clipMline)
- [[while_DOOM_feef25dd|r_bsp.c:226]] (R_ClipPassWallSegment)
- [[while_DOOM_dfe5f146|d_main.c:369]] (D_DoomLoop)

## Note Perso
*Ajouter vos notes personnelles ici...*

## Statistiques du Pattern
- **Premi√®re d√©tection**: 2025-04-25
- **Derni√®re mise √† jour**: 2025-04-25
- **Nombre d'occurrences**: 1 fichiers
- **Analys√© par IA**: Non
- **Optimisable**: Non

## Patterns li√©s
[[for_DOOM_b08db244|üîÑ Cha√Æne de montage (FOR)]]
[[for_DOOM_790f12f4|üîÑ Cha√Æne de montage (FOR)]]
[[for_DOOM_fe5c5de5|üîÑ Cha√Æne de montage (FOR)]]
[[do_while_DOOM_f95c2f34|üîÑ Tapis roulant √† activation garantie (DO WHILE)]]
[[do_while_DOOM_b1640881|üîÑ Tapis roulant √† activation garantie (DO WHILE)]]
[[do_while_DOOM_cd442d3d|üîÑ Tapis roulant √† activation garantie (DO WHILE)]]
