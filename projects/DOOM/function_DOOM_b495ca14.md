---
tags: pattern, pattern/function, factorio, code-logic, project/DOOM, pattern/variant/simple
date: 2025-04-25
pattern_type: function
pattern_variant: simple
source_file: p_mobj.c
line: 578
project: DOOM
first_seen: 2025-04-25
occurrences: 1
ai_analyzed: non
optimizable: non
---

# üè≠ Usine modulaire (FUNCTION) (Simple)

## Contexte
- **Fichier**: `p_mobj.c`
- **Ligne**: 578
- **Fonction**: P_RespawnSpecials
- **Projet**: DOOM
- **Variante**: Simple
- **Complexit√©**: standard

## M√©taphore Factorio
üè≠ **Usine modulaire**

Comme une usine qui prend des entr√©es, effectue un traitement, et produit des sorties.

## Code Source
```c
void P_RespawnSpecials (void)
{
    fixed_t		x;
    fixed_t		y;
    fixed_t		z;
    
    subsector_t*	ss; 
    mobj_t*		mo;
    mapthing_t*		mthing;
    
    int			i;

    // only respawn items in deathmatch
    if (deathmatch != 2)
	return;	// 

    // nothing left to respawn?
    if (iquehead == iquetail)
	return;		

    // wait at least 30 seconds
    if (leveltime - itemrespawntime[iquetail] < 30*35)
	return;			

    mthing = &itemrespawnque[iquetail];
	
    x = mthing->x << FRACBITS; 
    y = mthing->y << FRACBITS; 
	  
    // spawn a teleport fog at the new spot
    ss = R_PointInSubsector (x,y); 
    mo = P_SpawnMobj (x, y, ss->sector->floorheight , MT_IFOG); 
    S_StartSound (mo, sfx_itmbk);

    // find which type to spawn
    for (i=0 ; i< NUMMOBJTYPES ; i++)
    {
	if (mthing->type == mobjinfo[i].doomednum)
	    break;
    }
    
    // spawn it
    if (mobjinfo[i].flags & MF_SPAWNCEILING)
	z = ONCEILINGZ;
    else
	z = ONFLOORZ;

    mo = P_SpawnMobj (x,y,z, i);
    mo->spawnpoint = *mthing;	
    mo->angle = ANG45 * (mthing->angle/45);

    // pull it from the que
    iquetail = (iquetail+1)&(ITEMQUESIZE-1);
}
```

## Note Factorio-style
*Ce pattern fonctionne comme usine modulaire dans Factorio. Il comme une usine qui prend des entr√©es, effectue un traitement, et produit des sorties.*

## Patterns Similaires
- [[function_DOOM_f6f32dce|p_mobj.c:356]] (P_NightmareRespawn)
- [[function_DOOM_df2621fe|p_mobj.c:642]] (P_SpawnPlayer)
- [[function_DOOM_454cc809|p_enemy.c:1449]] (A_PainShootSkull)
- [[function_DOOM_14bf1da2|p_enemy.c:1021]] (A_Tracer)
- [[function_DOOM_00f56ab0|p_saveg.c:114]] (P_ArchiveWorld)

## Note Perso
*Ajouter vos notes personnelles ici...*

## Statistiques du Pattern
- **Premi√®re d√©tection**: 2025-04-25
- **Derni√®re mise √† jour**: 2025-04-25
- **Nombre d'occurrences**: 1 fichiers
- **Analys√© par IA**: Non
- **Optimisable**: Non

## Patterns li√©s
[[return_DOOM_3e1b4f0f|üöö Convoyeur de sortie (RETURN)]]
[[return_DOOM_e198b61b|üöö Convoyeur de sortie (RETURN)]]
[[return_DOOM_e198b61b|üöö Convoyeur de sortie (RETURN)]]
